"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[656],{656:(z,f,r)=>{r.r(f),r.d(f,{CoworkingPageModule:()=>Q});var g=r(6019),a=r(9133),l=r(87),u=r(3174),_=r(4762),e=r(3668),Z=r(8260),C=r(4522);let v=(()=>{class i{constructor(t){this.http=t,this.COWORKING_URL=Z.N.apiUrl+"/coworking"}postCoworking(t){return console.log("coworking service:",t),this.http.post(`${this.COWORKING_URL}`,t)}stripe(t){return console.log("coworking service:",t),this.http.post(`${this.COWORKING_URL}/stripe`,t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var k=r(6022),w=r(8028),T=r(4670),A=r(5788),x=r(9947),p=r(6031),m=r(2107),F=r(4275),h=r(7429),b=r(2450);const P=["picker"],q=["creditCardElement"];function U(i,s){1&i&&e._UZ(0,"loader")}function D(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"p"),e._uU(2," Votre r\xe9servation n'a pas pu \xeatre effectu\xe9e. Veuillez r\xe9essayer. "),e.qZA(),e.TgZ(3,"div",16),e.TgZ(4,"ion-button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReload()}),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.RELOAD)}}function E(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"p"),e._uU(2,"Merci, votre r\xe9servation a bien \xe9t\xe9 effectu\xe9e."),e.qZA(),e.TgZ(3,"div",16),e.TgZ(4,"ion-button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().onNavigateHome()}),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.HOME_BTN_TEXT)}}function y(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",42),e._uU(1),e.qZA()),2&i){const t=s.index;e.Q6J("value",t+1),e.xp6(1),e.Oqu(t+1)}}function N(i,s){1&i&&(e.TgZ(0,"mat-icon",45),e._uU(1,"cancel"),e.qZA())}function M(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",43),e.NdJ("removed",function(){const c=e.CHM(t).$implicit;return e.oxw(2).remove(c)}),e._uU(1),e.ALo(2,"date"),e.YNc(3,N,2,0,"mat-icon",44),e.qZA()}if(2&i){const t=s.$implicit;e.Q6J("selectable",!1)("removable",!0),e.xp6(1),e.hij(" ",e.lcZ(2,4,t)," "),e.xp6(2),e.Q6J("ngIf",!0)}}function I(i,s){1&i&&(e.TgZ(0,"ion-button",46),e._UZ(1,"loader"),e.qZA())}function L(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"form",19),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"ion-list"),e.TgZ(2,"ion-item"),e.TgZ(3,"ion-label"),e._uU(4,"Personne(s)"),e._UZ(5,"atom-asterisk"),e.qZA(),e.TgZ(6,"ion-select",20),e.NdJ("ionChange",function(o){return e.CHM(t),e.oxw().onSelectChange(o)}),e.YNc(7,y,2,2,"ion-select-option",21),e.qZA(),e.qZA(),e.TgZ(8,"div",22),e.TgZ(9,"mat-form-field",23),e.TgZ(10,"mat-label"),e._uU(11,"S\xe9lectionnez une/des date(s)"),e._UZ(12,"atom-asterisk"),e.qZA(),e.TgZ(13,"mat-chip-list",24,25),e.NdJ("click",function(){return e.CHM(t),e.MAs(19).open()}),e.YNc(15,M,4,6,"mat-chip",26),e.TgZ(16,"input",27),e.NdJ("dateChange",function(o){return e.CHM(t),e.oxw().dateChanged(o)}),e.qZA(),e.qZA(),e._UZ(17,"mat-datepicker-toggle",28),e._UZ(18,"mat-datepicker",29,30),e.qZA(),e.qZA(),e.TgZ(20,"ion-item"),e.TgZ(21,"ion-label",31),e._uU(22,"Nom"),e._UZ(23,"atom-asterisk"),e.qZA(),e._UZ(24,"ion-input",32),e.qZA(),e.TgZ(25,"p",33),e._uU(26," Veuillez renseigner votre nom "),e.qZA(),e.TgZ(27,"ion-item"),e.TgZ(28,"ion-label",31),e._uU(29,"T\xe9l\xe9phone"),e._UZ(30,"atom-asterisk"),e.qZA(),e._UZ(31,"ion-input",34),e.qZA(),e.TgZ(32,"p",33),e._uU(33," Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone "),e.qZA(),e.TgZ(34,"ion-item"),e.TgZ(35,"ion-label",31),e._uU(36,"E-mail"),e._UZ(37,"atom-asterisk"),e.qZA(),e._UZ(38,"ion-input",35),e.qZA(),e.TgZ(39,"p",33),e._uU(40," Veuillez renseigner votre email "),e.qZA(),e.TgZ(41,"ion-item",36),e.TgZ(42,"ion-label"),e._uU(43,"Informations de carte"),e._UZ(44,"atom-asterisk"),e.qZA(),e.qZA(),e._UZ(45,"div",37,38),e.TgZ(47,"div",39),e.TgZ(48,"ion-button",40),e._uU(49),e.ALo(50,"currency"),e.qZA(),e.YNc(51,I,2,0,"ion-button",41),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(14),n=e.MAs(19),o=e.oxw();e.Q6J("formGroup",o.coworkingForm),e.xp6(7),e.Q6J("ngForOf",o.getCount(o.maxPersonsAllowed)),e.xp6(8),e.Q6J("ngForOf",o.model),e.xp6(1),e.Q6J("value",o.resetModel)("matDatepicker",n)("min",o.minDateFilter)("max",o.maxDateFilter)("matDatepickerFilter",o.dateFilter)("matChipInputFor",t),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("disabled",o.coworkingForm.get("personsNumber").invalid)("startAt",o.init)("dateClass",o.dateClass),e.xp6(7),e.Q6J("ngClass",o.coworkingForm.get("name").invalid&&o.coworkingForm.get("name").touched?"show-error":""),e.xp6(7),e.Q6J("ngClass",o.coworkingForm.get("phone").invalid&&o.coworkingForm.get("phone").touched?"show-error":""),e.xp6(7),e.Q6J("ngClass",o.coworkingForm.get("email").invalid&&o.coworkingForm.get("email").touched?"show-error":""),e.xp6(9),e.Q6J("disabled",o.coworkingForm.invalid||0===o.totalPrice||0===o.coworkingForm.get("bookingDateList").value.length||!o.isCardValid),e.xp6(1),e.AsE(" ",o.PAY_BUTTON_TEXT," ",e.lcZ(50,20,o.totalPrice)," "),e.xp6(2),e.Q6J("ngIf",o.isLoading)}}const O=[{path:"",component:(()=>{class i{constructor(t,n){this.router=t,this.coworkingService=n,this.init=new Date,this.resetModel=new Date(0),this.model=[],this.isLoading=!1,this.hideForm=!1,this.isFormSent=!1,this.isFormFailed=!1,this.maxPersonsAllowed=10,this.totalPrice=0,this.pricePerHour=6.5,this.bookedDays=[{date:new Date("12/15/2020"),bookedPeople:5},{date:new Date("12/17/2020"),bookedPeople:4},{date:new Date("12/7/2020"),bookedPeople:10},{date:new Date("12/25/2020"),bookedPeople:5},{date:new Date("12/29/2020"),bookedPeople:8},{date:new Date("12/9/2020"),bookedPeople:7},{date:new Date("1/20/2021"),bookedPeople:7},{date:new Date("1/25/2021"),bookedPeople:7}],this.HEADER_TITLE="Coworking",this.TITLE="Coworking Artistique et Culturel",this.HOME_BTN_TEXT="Accueil",this.VALIDATE_BUTTON_TEXT="Valider",this.PAY_BUTTON_TEXT="R\xe9gler",this.RELOAD="R\xe9essayer",this.isCardValid=!1,this.FRENCH_CARD_NUMBER=0xe35fb281cf903,this.DECLINED_PAYMENT_CARD_NUMBER=0xe35fa931a270b,this._close_on_selected=!1,this.dateClass=o=>-1!==this._findDate(o)?["selected"]:[],this.dateFilter=o=>{const c=this._getUnAvailableDays(this.coworkingForm.get("personsNumber").value,this.bookedDays),d=(o||new Date).getDay();for(const Y of c)if(o.toLocaleDateString()===Y)return!1;return 0!==d&&6!==d}}ngOnInit(){this._initCoworkingForm(),this._setMinMaxDates()}ionViewDidEnter(){this._initStripe()}ionViewDidLeave(){this.coworkingForm.reset(),this.model=[],this.isLoading=!1,this.hideForm=!1,this.isFormSent=!1,this.isFormFailed=!1}dateChanged(t){if(t.value){const n=t.value,o=this._findDate(n),c=this.coworkingForm.get("bookingDateList");if(-1===o?(this.model.push(n),c.push(new a.NI(n))):(this.model.splice(o,1),c.removeAt(o)),this.resetModel=new Date(0),!this._close_on_selected){const d=this._picker.close;this._picker.close=()=>{},this._picker._popupComponentRef.instance._calendar.monthView._createWeekCells(),setTimeout(()=>{this._picker.close=d})}this.totalPrice=this.coworkingForm.get("personsNumber").value*this.model.length*this.pricePerHour}}remove(t){const n=this._findDate(t);this.model.splice(n,1),this.coworkingForm.get("bookingDateList").removeAt(n),this.totalPrice=this.coworkingForm.get("personsNumber").value*this.model.length*this.pricePerHour}onSubmit(){return(0,_.mG)(this,void 0,void 0,function*(){if(this.coworkingForm.invalid)return;const t=yield this.stripe.createToken(this.creditCardContainer),n=this.coworkingForm.value;n.token=t.token,t.error||(this.isLoading=!0,this.coworkingService.postCoworking(n).subscribe(o=>{this.isLoading=!1,this.isFormSent=!0,this.hideForm=!0,this.coworkingForm.reset()},o=>{console.log(o),this.isLoading=!1,this.isFormFailed=!0}))})}onSelectChange(t){0!==this.totalPrice&&(this.totalPrice=t.detail.value*this.model.length*this.pricePerHour)}getCount(t){return new Array(t)}onNavigateHome(){this.isLoading=!1,this.isFormSent=!1,this.isFormFailed=!1,this.coworkingForm.reset(),this.router.navigateByUrl("/lcdq/accueil")}onReload(){location.reload()}_initStripe(){this.stripe=Stripe("pk_test_51HuFU7H5cEg8n0QAB1Y3OMIH5H6T3o4rs7q8pBLsLzQ3w01hNGmPjuipe4R8G1zn9AAp4IHCzMm0K1erufpLAcjU00ISs2mBZX");const t=this.stripe.elements({locale:"fr"});this.creditCardContainer=t.create("card"),this.creditCardContainer.mount(this.creditCardElement.nativeElement),this.creditCardContainer.addEventListener("change",n=>{console.log(n),this.cardErrors=n.error&&n.error.message,this.isCardValid=n.complete})}_initCoworkingForm(){this.coworkingForm=new a.cw({name:new a.NI(null,a.kI.required),phone:new a.NI(null,a.kI.required),email:new a.NI(null,[a.kI.required,a.kI.email]),personsNumber:new a.NI(null,a.kI.required),bookingDateList:new a.Oe([],a.kI.required)})}_setMinMaxDates(){this.minDateFilter=new Date;const t=(new Date).getFullYear()+1;this.maxDateFilter=new Date(t+0,11,31)}_findDate(t){return this.model.map(n=>+n).indexOf(+t)}_getUnAvailableDays(t,n){const o=n.filter(c=>c.bookedPeople+t>this.maxPersonsAllowed).map(c=>c.date.toLocaleDateString());return console.log(o),o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.F0),e.Y36(v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coworking"]],viewQuery:function(t,n){if(1&t&&(e.Gf(P,5),e.Gf(q,5)),2&t){let o;e.iGM(o=e.CRH())&&(n._picker=o.first),e.iGM(o=e.CRH())&&(n.creditCardElement=o.first)}},decls:41,vars:6,consts:[[3,"headerTitle"],[1,"ion-no-padding"],[1,"squared-shapes",3,"title"],[1,"ion-padding"],["size","12","size-md","6","offset-md","3"],[1,"description"],[1,"description-item"],[1,"description-item--icon"],[1,"description-item--content"],["size","12","size-md","4","offset-md","4"],[1,"ion-no-margin","ion-margin-vertical"],[4,"ngIf"],["class","message-sent--fail",4,"ngIf"],["class","message-sent--success",4,"ngIf"],["class","form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"message-sent--fail"],[1,"btn__container--flex"],[3,"click"],[1,"message-sent--success"],[1,"form",3,"formGroup","ngSubmit"],["formControlName","personsNumber","interface","popover",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"calendar"],["appearance","fill"],["aria-label","Choisir une date",3,"click"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","placeholder","Choisir une date","required","","hidden","",3,"value","matDatepicker","min","max","matDatepickerFilter","matChipInputFor","dateChange"],["matSuffix","",3,"for"],[3,"disabled","startAt","dateClass"],["picker",""],["position","floating"],["type","text","name","name","formControlName","name","required",""],[1,"error-message",3,"ngClass"],["type","text","name","phone","formControlName","phone","required",""],["type","email","name","email","formControlName","email","required",""],["lines","none",1,"credit-card__label"],[1,"credit-card__input"],["creditCardElement",""],[1,"btn__container","btn__container--block","btn__container--submit"],["type","submit","color","secondary","expand","block",1,"ion-margin-vertical",3,"disabled"],["type","button","color","secondary","expand","block",4,"ngIf"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["type","button","color","secondary","expand","block"]],template:function(t,n){1&t&&(e._UZ(0,"ion-header-component",0),e.TgZ(1,"ion-content"),e.TgZ(2,"ion-grid",1),e.TgZ(3,"ion-row"),e.TgZ(4,"ion-col"),e._UZ(5,"squared-shapes-svg",2),e.qZA(),e.qZA(),e.TgZ(6,"ion-row",3),e.TgZ(7,"ion-col",4),e.TgZ(8,"ul",5),e.TgZ(9,"li",6),e._UZ(10,"two-triangle-svg",7),e.TgZ(11,"p",8),e._uU(12," Du lundi au vendredi de 10h a\u0300 13h. "),e.qZA(),e.qZA(),e.TgZ(13,"li",6),e._UZ(14,"two-triangle-svg",7),e.TgZ(15,"p",8),e._uU(16," Espace de travail a\u0300 destination d'artistes, freelances, associations ou compagnies pour leurs projets artistiques, re\u0301unions, de\u0301marches administratives et de\u0301veloppement culturel "),e.qZA(),e.qZA(),e.TgZ(17,"li",6),e._UZ(18,"two-triangle-svg",7),e.TgZ(19,"p",8),e._uU(20," Forfait unique a\u0300 6.50\u20ac par personne pour la matine\u0301e "),e.qZA(),e.qZA(),e.TgZ(21,"li",6),e._UZ(22,"two-triangle-svg",7),e.TgZ(23,"p",8),e._uU(24,"Places limit\xe9es"),e.qZA(),e.qZA(),e.TgZ(25,"li",6),e._UZ(26,"two-triangle-svg",7),e.TgZ(27,"p",8),e._uU(28," The\u0301 et cafe\u0301 en libre service "),e.qZA(),e.qZA(),e.TgZ(29,"li",6),e._UZ(30,"two-triangle-svg",7),e.TgZ(31,"p",8),e._uU(32," Possibilit\xe9 d'utiliser l'imprimante de l'association "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"ion-row"),e.TgZ(34,"ion-col",9),e.TgZ(35,"ion-card",10),e.TgZ(36,"ion-card-content"),e.YNc(37,U,1,0,"loader",11),e.YNc(38,D,6,1,"div",12),e.YNc(39,E,6,1,"div",13),e.YNc(40,L,52,22,"form",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("headerTitle",n.HEADER_TITLE),e.xp6(5),e.Q6J("title",n.TITLE),e.xp6(32),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&n.isFormFailed),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&n.isFormSent),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&!n.isFormSent&&!n.isFormFailed))},directives:[k.e,l.W2,l.jY,l.Nd,l.wI,w.k,T.Z,l.PM,l.FN,g.O5,A.R,l.YG,a._Y,a.JL,a.sg,l.q_,l.Ie,l.Q$,x.y,l.t9,l.QI,a.JJ,a.u,g.sg,p.KE,p.hX,m.qn,F.Nt,h.hl,m.oH,h.nW,p.R9,h.Mq,l.pK,l.j9,a.Q7,g.mk,l.n0,m.HS,b.Hw,m.qH],pipes:[g.H9,g.uU],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap";@import"https://fonts.googleapis.com/css2?family=Oswald&display=swap";.overlay[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;background:rgba(0,0,0,.4);display:flex;justify-content:center;align-items:center}.overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:2rem;background:#5dbeba;color:#fff;border-radius:8px;transform:rotate(-15deg)}.description-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;margin:1rem auto 0}.description-item--icon[_ngcontent-%COMP%]{width:20px;height:20px;margin:0 1rem 0 0;display:flex;align-items:flex-start;justify-content:flex-start}.description-item--content[_ngcontent-%COMP%]{flex:1}.calendar[_ngcontent-%COMP%]{margin:1rem 0 0}.credit-card__label[_ngcontent-%COMP%]{margin:2rem 0 0}.credit-card__input[_ngcontent-%COMP%]{width:300px;margin:0 auto;padding:1rem;border:1px solid #5dbeba;border-radius:4px}.btn__container--flex[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn__container--block[_ngcontent-%COMP%]{display:block}.btn__container--submit[_ngcontent-%COMP%]{margin:3rem 0 1rem}']}),i})()},{path:"coworking",redirectTo:"",pathMatch:"full"}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.Bz.forChild(O)],u.Bz]}),i})();var H=r(3785),R=r(1382),S=r(6828);let Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.ez,a.UX,l.Pc,J,R.m,H.q,S.p]]}),i})()}}]);
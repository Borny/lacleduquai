<!-- Loader -->
<ion-spinner
	*ngIf="isLoading"
	class="loader"
	name="crescent"
	color="primary"
></ion-spinner>

<!-- News error -->
<div *ngIf="newsError">
	<p>Impossible de récupérer les news</p>
	<ion-button color="warning" (click)="onClose()">Fermer</ion-button>
</div>

<!-- News info -->
<div *ngIf="showDialog">
	<h2 class="color-primary" mat-dialog-title>
		{{ news.label }}
	</h2>
	<div mat-dialog-content>
		<form
			class="news-edition-form"
			[formGroup]="newsEditionForm"
			(ngSubmit)="onSubmit()"
		>
			<ion-list>
				<!-- Label -->
				<ion-item>
					<ion-label position="floating">Nouveauté</ion-label>
					<ion-input
						type="text"
						name="label"
						formControlName="label"
						required
					></ion-input>
				</ion-item>
				<p
					class="error-message"
					[ngClass]="
						newsEditionForm.get('label').invalid &&
						newsEditionForm.get('label').touched
							? 'show-error'
							: ''
					"
				>
					Veuillez renseigner une nouveauté
				</p>

				<!-- link -->
				<ion-item>
					<ion-label position="floating">Lien</ion-label>
					<ion-input
						type="text"
						name="link"
						formControlName="link"
						required
					></ion-input>
				</ion-item>
				<p
					class="error-message"
					[ngClass]="
						newsEditionForm.get('link').invalid &&
						newsEditionForm.get('link').touched
							? 'show-error'
							: ''
					"
				>
					Veuillez renseigner un lien
				</p>
			</ion-list>
		</form>
	</div>

	<!-- CTAs -->
	<div mat-dialog-actions align="end">
		<ion-button color="danger" (click)="onOpenDeleteModal()">
			Supprimer
		</ion-button>
		<ion-button color="warning" (click)="onCancel()">Annuler</ion-button>
		<ion-button
			[disabled]="newsEditionForm.invalid || newsEditionForm.pristine"
			color="primary"
			[mat-dialog-close]="{ news: news, action: CONFIRM }"
			(click)="onSubmit()"
		>
			Modifier
		</ion-button>
	</div>
</div>

<ion-content>
  <ion-grid class="ion-no-padding">
    <ion-row>
      <ion-col size="12">
        <h1>Formulaire d'adhésion à l'association La Clé Du Quai</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-sm="10" offset-sm="1">
        <ion-card class="form__container">
          <ion-card-content>
            <!-- Loader -->
            <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>

            <!-- Response success -->
            <div class="form__response" *ngIf="formSentSuccess">
              <p>Merci, votre adhésion a bien été prise en compte.</p>
              <ion-button
                class="btn"
                color="primary"
                type="button"
                (click)="onReload()"
              >
                Terminé !
              </ion-button>
            </div>

            <!-- Response error -->
            <div *ngIf="formSentFail" class="form__response">
              <p>Désolé, une erreur s'est produite. Veuillez réessayer.</p>
              <ion-button
                class="btn"
                type="button"
                color="primary"
                (click)="onReload()"
              >
                S'inscrire
              </ion-button>
            </div>
            <form
              *ngIf="!isLoading && !hideForm"
              class="subscription-form"
              [formGroup]="subscriptionForm"
              (ngSubmit)="onSubmit()"
            >
              <ion-item class="form-control">
                <ion-label class="label" position="stacked"
                  >Nom<atom-asterisk></atom-asterisk
                ></ion-label>
                <ion-input
                  type="text"
                  name="lastName"
                  class="label"
                  formControlName="lastName"
                  required
                ></ion-input>
              </ion-item>
              <p
                class="error-message"
                [ngClass]="subscriptionForm.get('lastName').invalid && subscriptionForm.get('lastName').touched ? 'show-error': ''"
              >
                Veuillez renseigner votre nom
              </p>
              <ion-item class="form-control">
                <ion-label class="label" position="stacked"
                  >Prénom<atom-asterisk></atom-asterisk
                ></ion-label>
                <ion-input
                  type="text"
                  name="firstName"
                  class="label"
                  formControlName="firstName"
                  required
                ></ion-input>
              </ion-item>
              <p
                [ngClass]="subscriptionForm.get('firstName').invalid && subscriptionForm.get('firstName').touched ? 'show-error' : ''"
                class="error-message"
              >
                Veuillez renseigner votre prénom
              </p>
              <ion-item class="form-control">
                <ion-label class="label" position="stacked"
                  >Email<atom-asterisk></atom-asterisk
                ></ion-label>
                <ion-input
                  type="email"
                  name="email"
                  class="label"
                  formControlName="email"
                  required
                ></ion-input>
              </ion-item>
              <p
                class="error-message"
                [ngClass]="subscriptionForm.get('email').invalid && subscriptionForm.get('email').touched ? 'show-error': ''"
              >
                Veuillez renseigner votre email
              </p>
              <ion-item lines="none" class="checkbox__container">
                <ion-checkbox
                  slot="start"
                  formControlName="newsletterSubscription"
                ></ion-checkbox>
                <ion-label class="newsletter-checkbox-label"
                  >Je souhaite m'inscrire à la newsletter de <br />
                  La Clé du Quai</ion-label
                >
              </ion-item>
              <p class="price">Adhésion à prix libre</p>
              <ion-button
                class="submit-btn"
                type="submit"
                color="primary"
                [disabled]="subscriptionForm.invalid"
              >
                Valider
              </ion-button>
            </form>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
